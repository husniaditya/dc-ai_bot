:root {
  --bg-gradient: linear-gradient(135deg,#1f2547 0%, #242c4f 35%, #1b1f33 100%);
  --glass-bg: rgba(255,255,255,0.06);
  --glass-border: rgba(255,255,255,0.12);
  --accent: #6366f1;
  --accent-glow: 0 0 0 2px rgba(99,102,241,0.35),0 4px 12px -2px rgba(99,102,241,0.55);
  --danger: #ef4444;
  --success: #10b981;
  --warn: #f59e0b;
  --radius-sm: 6px;
  --radius: 12px;
  --transition: 160ms cubic-bezier(.4,.2,.2,1);
  --text-muted: #9aa4c2;
  --text-base: #e5ecf7;
  --text-soft: #c9d2e4;
}

/* Light theme overrides (html WITHOUT .dark) */
html:not(.dark) {
  /* Softer cool-white gradient background */
  --bg-gradient: linear-gradient(140deg,#f6f8fc 0%, #eef2f9 40%, #e6ebf5 100%);
  --glass-bg: rgba(255,255,255,0.75);
  --glass-border: rgba(0,0,0,0.08);
  --text-base: #1f2530;
  --text-soft: #344152;
  --text-muted: #6b7484;
}
html:not(.dark) body { color: var(--text-base); }
html:not(.dark) .nav-glass, html:not(.dark) .card-glass, html:not(.dark) .modal-content {
  background: var(--glass-bg) !important;
  border-color: var(--glass-border) !important;
  backdrop-filter: blur(14px) saturate(160%);
}
html:not(.dark) .navbar-brand { color: var(--text-base) !important; }
html:not(.dark) .toggle-theme-btn { background: rgba(0,0,0,0.06) !important; color:#2a3140 !important; border:1px solid rgba(0,0,0,0.12) !important; }
html:not(.dark) .toggle-theme-btn:hover { background: rgba(0,0,0,0.1) !important; }
html:not(.dark) .table-modern thead th { color:#445066 !important; }
html:not(.dark) .table-modern tbody td { color:#222 !important; }
html:not(.dark) .table-modern tbody tr:hover { background: linear-gradient(90deg, rgba(0,0,0,0.06), rgba(0,0,0,0.02)) !important; }
html:not(.dark) .dash-menu-item { background: rgba(255,255,255,0.9); border-color: rgba(0,0,0,0.08); color:#445066; }
html:not(.dark) .dash-menu-item:hover { background:#fff; color:#1f2530; }
html:not(.dark) .dash-menu-item.active { background: linear-gradient(120deg, rgba(99,102,241,0.15), rgba(99,102,241,0.05)); color:#1f2530; border-color: var(--accent); }
html:not(.dark) .guild-card { background: #ffffff; border-color: rgba(0,0,0,0.08); }
html:not(.dark) .guild-card:hover { background:#f5f8fd; }
html:not(.dark) .guild-card.active { background:linear-gradient(145deg,#fff,#f0f3fa); }
html:not(.dark) .auto-card { background: linear-gradient(145deg,#ffffff,#f3f6fb); border-color: rgba(0,0,0,0.08); }
html:not(.dark) .auto-card.match { background: linear-gradient(145deg, rgba(16,185,129,0.18), rgba(16,185,129,0.06)); }
html:not(.dark) select.form-select option { background:#fff; color:#1f2530; }
html:not(.dark) .form-control, html:not(.dark) .form-select, html:not(.dark) textarea.form-control { background: rgba(255,255,255,0.85) !important; border:1px solid rgba(0,0,0,0.12) !important; color:#1f2530 !important; }
html:not(.dark) .form-control:focus, html:not(.dark) .form-select:focus, html:not(.dark) textarea.form-control:focus { box-shadow:0 0 0 2px rgba(99,102,241,0.4) !important; }
html:not(.dark) ::placeholder { color:#7c8899 !important; }
html:not(.dark) .toast-item { background: linear-gradient(135deg,rgba(255,255,255,0.95),rgba(255,255,255,0.85)); border-color: rgba(0,0,0,0.1); color:#1f2530; }
html:not(.dark) .toast-item.toast-success { color:#046c46; border-color: rgba(16,185,129,0.45); }
html:not(.dark) .toast-item.toast-error { color:#b91c1c; border-color: rgba(239,68,68,0.5); }
html:not(.dark) .toast-item.toast-info { color:#303d66; border-color: rgba(99,102,241,0.5); }
html:not(.dark) .theme-toggle .track { background:linear-gradient(145deg,rgba(0,0,0,0.08),rgba(0,0,0,0.02)); border-color: rgba(0,0,0,0.15); }
html:not(.dark) .theme-toggle .thumb { background:linear-gradient(145deg,#ffffff,#dbe2f0); box-shadow:0 2px 6px -2px rgba(0,0,0,0.4),0 0 0 1px rgba(0,0,0,0.08); }
html:not(.dark) .theme-toggle input:checked + .track .thumb { background:linear-gradient(145deg,var(--accent) 0%, #8184ff 55%, #6366f1 100%); }
html:not(.dark) .brand-logo { box-shadow:0 2px 6px -2px rgba(0,0,0,0.4),0 0 0 1px rgba(0,0,0,0.1); }
html:not(.dark) .app-footer { color: var(--text-muted); }

html.dark body {
  --bg-gradient: linear-gradient(135deg,#0f1119 0%, #131826 40%, #0d1018 100%);
}

body {
  background: var(--bg-gradient) fixed;
  font-family: 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif;
  color: var(--text-base);
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  --bs-body-color: var(--text-base);
  /* Reserve space for scrollbar to avoid layout shift page-to-page */
  overflow-y: scroll;
  scrollbar-gutter: stable;
}

/* Top bar */
.collapse-toggle-header { margin-left:.35rem; height:30px; padding:0 .6rem; }
.collapse-toggle-header .chev { font-size:.75rem; }
.container-fluid { padding-top:1rem !important; }

.app-shell {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

.nav-glass, .card-glass, .modal-content {
  background: var(--glass-bg) !important;
  backdrop-filter: blur(14px) saturate(160%);
  -webkit-backdrop-filter: blur(14px) saturate(160%);
  border: 1px solid var(--glass-border) !important;
  border-radius: var(--radius);
}

.navbar-brand {
  font-weight: 600;
  letter-spacing: .5px;
  color: var(--text-base) !important;
}

.btn-brand {
  background: linear-gradient(90deg,var(--accent),#7a7dff);
  border: none;
  color: #fff !important;
  box-shadow: var(--accent-glow);
  font-weight: 500;
}
.btn-brand:hover { filter: brightness(1.07); }

.badge-soft {
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.12);
  padding: .35rem .6rem;
  border-radius: 999px;
  font-size: .65rem;
  letter-spacing: .5px;
  text-transform: uppercase;
}
.badge-on { color: var(--success); }
.badge-off { color: var(--danger); }

.table-modern thead th {
  font-size: .7rem;
  letter-spacing: .5px;
  text-transform: uppercase;
  border: none !important;
  color: var(--text-soft);
}
.table-modern tbody tr {
  transition: var(--transition);
}
.table-modern tbody tr:hover {
  background: linear-gradient(90deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.03) 100%) !important;
}
.table-modern tbody tr:hover td, .table-modern tbody tr:hover td small, .table-modern tbody tr:hover td a { color:#fff !important; }
.table-modern tbody tr.match-highlight:hover { background: linear-gradient(90deg,rgba(16,185,129,0.38),rgba(16,185,129,0.25)) !important; }
.table-modern td { color: var(--text-base); }
.table-modern tbody td { color:#000 !important; }
.table-modern tbody td a, .table-modern tbody td small { color:#111 !important; }

/* Light green Edit button */
.btn-edit { color:#059669 !important; border:1px solid #059669 !important; background:rgba(5,150,105,0.08) !important; }
.btn-edit:hover { background:#059669 !important; color:#fff !important; }
.table-modern td small { color: var(--text-soft); }
.table-modern .row-filler td { padding:.35rem .5rem; background: transparent; border:none; }
.text-muted { color: var(--text-muted) !important; }
.table-modern tbody tr.match-highlight { background: rgba(16,185,129,0.15); }
.table-modern tbody tr.match-highlight:hover { background: rgba(16,185,129,0.22); }
.table-modern-shell { position:relative; border:1px solid rgba(255,255,255,0.12); border-radius: var(--radius-sm); padding:.35rem .35rem .5rem; background: rgba(255,255,255,0.04); backdrop-filter: blur(8px) saturate(140%); max-height:60vh; overflow:auto; }
.table-modern { margin-bottom:0; }
.table-modern thead tr { background: linear-gradient(90deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02)); }
.table-modern thead th { position:sticky; top:0; backdrop-filter: blur(6px); z-index:2; }
.table-modern tbody tr { border-top:1px solid rgba(255,255,255,0.06); }
.table-modern tbody tr:first-child { border-top:none; }
.table-modern tbody tr.row-selected { outline:2px solid var(--accent); outline-offset:-2px; box-shadow:0 0 0 2px rgba(99,102,241,0.35) inset; }
.table-modern tbody tr.row-disabled td { opacity:.55; }
.table-modern tbody tr.row-disabled td .text-primary { color:#4a5568 !important; }
.table-modern tbody tr.row-disabled:hover { background: rgba(255,255,255,0.04); }
.table-modern tbody tr:hover td { background: rgba(255,255,255,0.04); }
.table-modern td, .table-modern th { vertical-align: middle; }
.table-modern td { font-size:.8rem; }
.table-modern thead th { font-size:.6rem; letter-spacing:.7px; }
.table-modern tbody tr td:first-child { width:28px; }
.table-modern .btn-edit { transition:var(--transition); }
.table-modern .btn-edit:hover { transform: translateY(-1px); }
.table-modern-shell::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.22); }

.bulk-bar { background: var(--glass-bg); border:1px solid var(--glass-border); border-radius: var(--radius-sm); padding:.4rem .75rem; display:flex; gap:.6rem; align-items:center; }
.pagination-modern button { background: rgba(255,255,255,0.07); border:1px solid rgba(255,255,255,0.15); color:#d7def0; font-size:.7rem; text-transform:uppercase; letter-spacing: .5px; }
.pagination-modern button.active { background: var(--accent); border-color: var(--accent); color:#fff; box-shadow: var(--accent-glow); }
.pagination-modern button:disabled { opacity:.4; }
.pagination-modern button { min-width:42px; }
.pagination-bar { min-height:44px; }
.bulk-bar-placeholder { height:38px; }

.search-input, .form-control, .form-select, textarea.form-control {
  background: rgba(255,255,255,0.06) !important;
  border: 1px solid rgba(255,255,255,0.18) !important;
  color: var(--text-base) !important;
}
.form-control:focus, .form-select:focus, textarea.form-control:focus { box-shadow: 0 0 0 2px rgba(99,102,241,0.45) !important; }
.search-input:focus { box-shadow: 0 0 0 2px rgba(99,102,241,0.5); }

.section-title {
  font-size: .8rem;
  letter-spacing: 1px;
  text-transform: uppercase;
  font-weight: 600;
  color: var(--text-muted);
  margin-bottom: .75rem;
}

.divider-soft { height:1px; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.16), transparent); margin:1.25rem 0; }

.toggle-theme-btn {
  background: rgba(255,255,255,0.07) !important;
  border: 1px solid rgba(255,255,255,0.15) !important;
  color:#d2d9ec !important;
}
.toggle-theme-btn:hover { background: rgba(255,255,255,0.12) !important; }

/* Brand logo */
.brand-logo { width:34px; height:34px; display:block; object-fit:cover; border-radius:10px; box-shadow:0 2px 6px -2px rgba(0,0,0,0.55),0 0 0 1px rgba(255,255,255,0.18); }

/* Modern theme switch */
.theme-toggle { position:relative; display:inline-flex; align-items:center; cursor:pointer; }
.theme-toggle input { position:absolute; opacity:0; inset:0; margin:0; cursor:pointer; }
.theme-toggle .track { --h:28px; --w:56px; position:relative; width:var(--w); height:var(--h); background:linear-gradient(145deg,rgba(255,255,255,0.15),rgba(255,255,255,0.05)); border:1px solid rgba(255,255,255,0.25); border-radius:999px; display:flex; align-items:center; justify-content:space-between; padding:0 6px; box-sizing:border-box; backdrop-filter: blur(10px) saturate(160%); transition:background .35s,var(--transition); }
.theme-toggle .track:before { content:""; position:absolute; inset:0; border-radius:999px; box-shadow:0 4px 14px -4px rgba(0,0,0,0.6),0 0 0 1px rgba(255,255,255,0.15); pointer-events:none; }
.theme-toggle .icon { font-size:.8rem; color:#ffd86b; opacity:.88; transition:opacity .35s, filter .35s; display:flex; align-items:center; text-shadow:0 0 4px rgba(255,212,120,0.9),0 0 8px rgba(255,188,60,0.55); }
.theme-toggle .icon.moon { color:#a9c9ff; text-shadow:0 0 4px rgba(169,201,255,0.85),0 0 8px rgba(120,160,255,0.45); }
/* Dim inactive icon but keep clarity */
.theme-toggle input:checked + .track .icon.sun { opacity:.35; filter: grayscale(40%) brightness(.9); text-shadow:none; }
.theme-toggle input:not(:checked) + .track .icon.moon { opacity:.35; filter: grayscale(40%) brightness(.9); text-shadow:none; }
html.dark .theme-toggle .icon.sun { color:#ffdf80; }
html.dark .theme-toggle .icon.moon { color:#b3d2ff; }
.theme-toggle .thumb { position:absolute; top:2px; left:2px; width:24px; height:24px; background:linear-gradient(145deg,var(--accent) 0%, #8184ff 55%, #6366f1 100%); border-radius:50%; box-shadow:0 4px 10px -2px rgba(0,0,0,0.6),0 0 0 1px rgba(255,255,255,0.26),0 0 0 4px rgba(99,102,241,0.35); transition: transform .45s cubic-bezier(.5,.2,.2,1), background .45s; display:block; }
.theme-toggle input:checked + .track .thumb { transform: translateX(28px); }
.theme-toggle input:checked + .track { background:linear-gradient(145deg,rgba(31,37,71,0.65),rgba(31,37,71,0.35)); }
.theme-toggle input:checked + .track .icon.sun { opacity:.35; }
.theme-toggle input:not(:checked) + .track .icon.moon { opacity:.35; }
.theme-toggle input:focus-visible + .track { outline:2px solid var(--accent); outline-offset:2px; }
html.dark .theme-toggle .thumb { background:linear-gradient(145deg,#303d66 0%, #2a3556 55%, #192238 100%); box-shadow:0 4px 10px -2px rgba(0,0,0,0.65),0 0 0 1px rgba(255,255,255,0.28),0 0 0 4px rgba(99,102,241,0.35); }
html.dark .theme-toggle input:checked + .track .thumb { background:linear-gradient(145deg,var(--accent) 0%, #8184ff 55%, #6366f1 100%); }
@media (prefers-reduced-motion: reduce){ .theme-toggle .thumb { transition:none; } }

.stat-cards { display:grid; gap:1rem; grid-template-columns: repeat(auto-fit,minmax(160px,1fr)); }
.stat-card {
  padding: .9rem .95rem;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: var(--radius-sm);
  position: relative;
  overflow: hidden;
}
.stat-card:before {
  content:''; position:absolute; inset:0; background: radial-gradient(circle at 70% -10%, rgba(99,102,241,0.35), transparent 70%); opacity:.65;
}
.stat-card h6 { font-size:.65rem; letter-spacing:.5px; text-transform:uppercase; color:var(--text-muted); margin:0 0 .3rem; }
.stat-card .value { font-size:1.15rem; font-weight:600; }

/* Fix dark theme text mismatches (Bootstrap defaults were near-black) */
html.dark h1, html.dark h2, html.dark h3, html.dark h4, html.dark h5, html.dark h6,
html.dark .card-title, html.dark .modal-title { color: var(--text-base); }
html.dark .navbar-brand, html.dark .section-title { color: var(--text-soft); }
html.dark .form-label, html.dark label { color: var(--text-soft); }
html.dark p, html.dark span, html.dark li, html.dark dt, html.dark dd { color: var(--text-base); }
html.dark .text-dark { color: var(--text-base) !important; }

/* Inputs & placeholders */
::placeholder { color: #96a3c4 !important; opacity:.75; }
html.dark ::placeholder { color: #8b96b4 !important; }

/* Outline buttons tweaked for dark glass */
.btn-outline-secondary { color: var(--text-soft); border-color: rgba(255,255,255,0.32); }
.btn-outline-secondary:hover { color:#fff; background: rgba(255,255,255,0.12); border-color: rgba(255,255,255,0.6); }
.btn-outline-light { border-color: rgba(255,255,255,0.4); }
.btn-outline-light:hover { background: rgba(255,255,255,0.18); }

/* Modal select dropdown with black text for contrast */
.modal select.form-select { background:#ffffff !important; color:#000 !important; }
.modal select.form-select option { color:#000; }

/* Ensure switches and checkboxes visible */
html.dark .form-check-label { color: var(--text-soft); }
html.dark .form-check-input { background-color: rgba(255,255,255,0.15); border-color: rgba(255,255,255,0.4); }
html.dark .form-check-input:checked { background-color: var(--accent); border-color: var(--accent); box-shadow: var(--accent-glow); }

.fade-in { animation: fadeIn .5s ease; }
@keyframes fadeIn { from { opacity:0; transform: translateY(6px);} to { opacity:1; transform: translateY(0);} }

.modal-content { box-shadow: 0 10px 40px -10px rgba(0,0,0,0.6); }
.modal-content {
  background: linear-gradient(140deg,#1f2536 0%, #202a40 55%, #1a2132 100%) !important;
  border:1px solid rgba(255,255,255,0.14) !important;
  backdrop-filter: blur(18px) saturate(160%);
}
.modal-header {
  background: rgba(255,255,255,0.04);
  border-bottom:1px solid rgba(255,255,255,0.08);
}
.modal-footer {
  background: rgba(255,255,255,0.035);
  border-top:1px solid rgba(255,255,255,0.08);
}
.modal-body { background: transparent; }
.modal-content .form-control, .modal-content .form-select, .modal-content textarea.form-control {
  background: rgba(255,255,255,0.07) !important;
  border:1px solid rgba(255,255,255,0.22) !important;
  color: var(--text-base) !important;
}
.modal-content .form-control:focus, .modal-content .form-select:focus, .modal-content textarea.form-control:focus {
  box-shadow: 0 0 0 2px rgba(99,102,241,0.45) !important;
}
.modal .btn-close { filter: invert(1) grayscale(100%) brightness(180%); opacity:.7; }
.modal .btn-close:hover { opacity:1; }

/* Toast notifications */
.toast-holder { position: fixed; top: 70px; right: 18px; z-index: 2000; display:flex; flex-direction:column; gap:.65rem; }
.toast-item { min-width:240px; max-width:320px; padding:.7rem .85rem .7rem .85rem; border-radius: var(--radius-sm); font-size:.85rem; line-height:1.15rem; display:flex; gap:.55rem; align-items:flex-start; position:relative; overflow:hidden; backdrop-filter: blur(10px) saturate(160%); border:1px solid rgba(255,255,255,0.18); background:linear-gradient(135deg,rgba(255,255,255,0.12),rgba(255,255,255,0.04)); animation: slideIn .45s cubic-bezier(.4,.2,.2,1); }
.toast-item.toast-success { border-color: rgba(16,185,129,.5); box-shadow:0 0 0 1px rgba(16,185,129,.35); color:#7bf2c3; }
.toast-item.toast-error { border-color: rgba(239,68,68,.55); box-shadow:0 0 0 1px rgba(239,68,68,.35); color:#ff9d9d; }
.toast-item.toast-info { border-color: rgba(99,102,241,.55); box-shadow:0 0 0 1px rgba(99,102,241,.35); }
.toast-close { background:none; border:none; color:#d0d7e9; font-size:14px; line-height:1; padding:0; cursor:pointer; opacity:.7; }
.toast-close:hover { opacity:1; }
@keyframes slideIn { from { opacity:0; transform: translateX(20px) translateY(-6px);} to { opacity:1; transform: translateX(0) translateY(0);} }

::-webkit-scrollbar { width: 10px; }
::-webkit-scrollbar-track { background: rgba(255,255,255,0.04); }
::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.16); border-radius: 6px; }
::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.28); }

/* Layout helpers */
.layout-grid { display:grid; grid-template-columns: minmax(260px,340px) 1fr; gap:2rem; }
@media (max-width: 992px){ .layout-grid { display:block; } }
.sidebar-sticky { position:sticky; top:70px; }

/* Dashboard sidebar layout */
.dashboard-flex { display:flex; align-items:flex-start; gap:2rem; }
@media (max-width: 1100px){ .dashboard-flex { gap:1.25rem; } }
@media (max-width: 900px){ .dashboard-flex { flex-direction:column; } }
.dash-sidebar { width:220px; flex:0 0 220px; position:sticky; top:74px; align-self:flex-start; }
@media (max-width: 900px){ .dash-sidebar { width:100%; position:static; } }
.dash-sidebar .sidebar-inner { position:relative; }
/* Multi-mode widths */
.dash-sidebar.mode-full { width:260px; flex:0 0 260px; }
.dash-sidebar.mode-mini { width:90px; flex:0 0 90px; }
.dashboard-flex.sidebar-full { grid-template-columns:260px 1fr; }
.dashboard-flex.sidebar-mini { grid-template-columns:90px 1fr; }
.dash-sidebar.animating { transition: width .36s cubic-bezier(.5,.2,.2,1), background .3s; }
.dash-sidebar.mode-mini .menu-label, .dash-sidebar.mode-mini .gw-meta, .dash-sidebar.mode-mini .logout-btn .menu-label { display:none; }
.dash-sidebar.mode-mini .dash-menu-item, .dash-sidebar.mode-mini .logout-btn { justify-content:center; }
.dash-sidebar.mode-mini .dash-menu-item .menu-ico { margin-right:0; }
@media (min-width:992px){
  .dash-sidebar.mode-mini .dash-menu-item,
  .dash-sidebar.mode-mini .logout-btn { position:relative; }
  .dash-sidebar.mode-mini .dash-menu-item:hover::after,
  .dash-sidebar.mode-mini .logout-btn:hover::after { content: attr(data-label); position:absolute; left:100%; top:50%; transform:translateY(-50%); background:linear-gradient(135deg,#141b27,#0d121b); color:#fff; font-size:.65rem; padding:4px 8px 5px; border-radius:6px; margin-left:12px; letter-spacing:.5px; box-shadow:0 6px 18px -6px rgba(0,0,0,.7), 0 0 0 1px rgba(255,255,255,0.08); white-space:nowrap; pointer-events:none; animation:sbTipIn .18s ease; z-index:5000; }
  @keyframes sbTipIn{ from{opacity:0; transform:translateY(-50%) translateX(-4px);} to{opacity:1; transform:translateY(-50%) translateX(0);} }
}
.dash-sidebar.collapsed { width:70px; flex:0 0 70px; }
.dash-sidebar.collapsed .guild-switcher-btn .gw-meta { display:none; }
.dash-sidebar.collapsed .dash-menu-item { justify-content:center; }
.dash-sidebar.collapsed .dash-menu-item .menu-label { display:none; }
.dash-sidebar.collapsed .logout-btn .menu-label { display:none; }
.dash-menu-item { display:flex; align-items:center; gap:.6rem; }
.dash-menu-item .menu-ico { width:16px; text-align:center; font-size:.9rem; opacity:.85; }
.dash-menu-item.active .menu-ico { opacity:1; }
/* Mobile overlay */
@media (max-width: 900px){
  .dash-sidebar { position:fixed; bottom:0; right:0; top:auto; left:auto; width:300px; max-width:86%; background:linear-gradient(140deg,#20273b 0%, #1a2030 60%, #171c29 100%); backdrop-filter: blur(18px) saturate(180%); padding:1rem .95rem 1.35rem; z-index:2300; transform: translateY(120%) scale(.9); transform-origin: bottom right; transition: 260ms cubic-bezier(.46,.14,.32,1.02); border:1px solid rgba(255,255,255,0.15); border-right:none; border-bottom:none; border-top-left-radius: 22px; box-shadow: 0 12px 40px -8px rgba(0,0,0,.65),0 0 0 1px rgba(255,255,255,0.08); }
  .dash-sidebar.open { transform: translateY(0) scale(1); }
  body.sidebar-open { overflow:hidden; }
  .dash-sidebar .sidebar-top-controls { margin-bottom:.75rem; }
}
.sidebar-backdrop { position:fixed; inset:0; background: radial-gradient(circle at 80% 85%, rgba(32,39,59,0.85), rgba(16,19,30,0.88)); backdrop-filter: blur(6px) saturate(140%); z-index:2200; animation: fadeIn .3s ease; }
.fab-toggle { position:fixed; bottom:18px; right:18px; width:58px; height:58px; border-radius:18px; background:linear-gradient(145deg,var(--accent) 0%, #7e81ff 50%, #6366f1 100%); color:#fff; display:flex; align-items:center; justify-content:center; font-size:1.25rem; border:none; z-index:2100; box-shadow:0 8px 28px -6px rgba(0,0,0,.6),0 0 0 2px rgba(255,255,255,0.12),0 0 0 5px rgba(99,102,241,.35); cursor:pointer; position:fixed; overflow:hidden; }
.fab-toggle .fab-ripple { position:absolute; inset:0; background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.35), transparent 70%); opacity:.55; mix-blend-mode:overlay; pointer-events:none; }
.fab-toggle:active { transform: translateY(2px); box-shadow:0 4px 18px -4px rgba(0,0,0,.6),0 0 0 2px rgba(255,255,255,0.12); }
.fab-toggle:hover .fab-ripple { opacity:.8; }
@media (max-width: 420px){ .fab-toggle { width:52px; height:52px; bottom:14px; right:14px; } }
.sidebar-top-controls .btn { font-size:.65rem; letter-spacing:.5px; text-transform:uppercase; }
.collapse-toggle { transition: var(--transition); }
.dash-sidebar.collapsed .collapse-toggle { transform: rotate(180deg); }
/* Modern collapse toggle */
.collapse-toggle { background:linear-gradient(145deg,rgba(255,255,255,0.12),rgba(255,255,255,0.04)); border:1px solid rgba(255,255,255,0.18); height:34px; padding:0 .85rem; border-radius:10px; font-size:.75rem; letter-spacing:.5px; font-weight:600; color:var(--text-soft); gap:.45rem; align-items:center; justify-content:center; cursor:pointer; position:relative; overflow:hidden; backdrop-filter: blur(10px) saturate(160%); box-shadow:0 4px 14px -6px rgba(0,0,0,.55); }
.collapse-toggle .chev { transition:transform .38s cubic-bezier(.5,.2,.2,1); }
.collapse-toggle:hover { color:#fff; border-color:rgba(255,255,255,0.4); background:linear-gradient(145deg,rgba(255,255,255,0.18),rgba(255,255,255,0.06)); }
.collapse-toggle:active { transform:translateY(1px); }
.collapse-toggle:focus-visible { outline:2px solid var(--accent); outline-offset:3px; }
.dash-sidebar.mode-mini .collapse-toggle .chev { transform:rotate(180deg); }
.dash-sidebar.mode-mini .guild-switcher { display:flex; flex-direction:row; align-items:center; gap:.4rem; padding:.35rem .35rem !important; }
.dash-sidebar.mode-mini .guild-switcher-btn { padding:0; justify-content:center; width:42px; }
.dash-sidebar.mode-mini .guild-switcher-btn .gw-meta { display:none; }
.dash-sidebar.mode-mini .guild-switcher .collapse-toggle { width:42px; height:42px; padding:0; display:flex !important; }
/* Override chevron rotation when using directional icon classes */
.dash-sidebar.mode-mini .guild-switcher .collapse-toggle .chev { transform:none !important; }
.dash-menu { display:flex; flex-direction:column; gap:.4rem; }
.dash-menu-item { text-align:left; border:1px solid rgba(255,255,255,0.18); background: rgba(255,255,255,0.05); padding:.65rem .85rem; border-radius: var(--radius-sm); font-size:.8rem; letter-spacing:.5px; font-weight:500; color:var(--text-soft); cursor:pointer; transition: var(--transition); position:relative; }
.dash-menu-item:before { content:""; position:absolute; inset:0; background: radial-gradient(circle at 110% -10%, rgba(99,102,241,0.38), transparent 65%); opacity:0; transition:var(--transition); }
.dash-menu-item:hover { background: rgba(255,255,255,0.08); color:#fff; }
.dash-menu-item:hover:before { opacity:.75; }
.dash-menu-item.active { border-color: var(--accent); background: linear-gradient(120deg, rgba(99,102,241,0.55), rgba(99,102,241,0.15)); color:#fff; box-shadow: var(--accent-glow); }
.dash-menu-item.active:before { opacity:1; }
.dash-main { flex:1 1 auto; min-width:0; }
.dash-main .section-title { margin-top:0; }

/* Guild switcher */
.guild-switcher { border-radius: var(--radius-sm); border:1px solid var(--glass-border); background: rgba(255,255,255,0.06); }
.guild-switcher-btn { width:100%; display:flex; align-items:center; gap:.65rem; background:none; border:none; padding:.45rem .55rem; text-align:left; color:var(--text-base); cursor:pointer; border-radius: var(--radius-sm); position:relative; }
.guild-switcher-btn:hover { background: rgba(255,255,255,0.08); }
.guild-switcher-btn:active { background: rgba(255,255,255,0.12); }
.guild-switcher-btn .gw-icon { width:42px; height:42px; border-radius: 14px; background: rgba(0,0,0,0.35); overflow:hidden; display:flex; align-items:center; justify-content:center; font-weight:600; font-size:.8rem; letter-spacing:.5px; box-shadow:0 0 0 1px rgba(255,255,255,0.15); }
.guild-switcher-btn .gw-icon img { width:100%; height:100%; object-fit:cover; display:block; }
.guild-switcher-btn .gw-icon .fallback { opacity:.85; }
.guild-switcher-btn .gw-meta { flex:1 1 auto; min-width:0; display:flex; flex-direction:column; line-height:1.05rem; }
.guild-switcher-btn .gw-name { font-size:.78rem; font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.guild-switcher-btn .gw-action { font-size:.6rem; letter-spacing:.5px; text-transform:uppercase; opacity:.7; }
.guild-switcher-btn:hover .gw-action { opacity:1; }
.dash-sidebar-footer { margin-top:auto; }
.dash-sidebar .logout-btn { position:relative; width:100%; }
.dash-sidebar .logout-btn:before { background: radial-gradient(circle at 110% -10%, rgba(239,68,68,0.55), transparent 65%); }
.dash-sidebar .logout-btn:hover { border-color: rgba(239,68,68,0.55); color:#fff; }
.dash-sidebar .logout-btn:hover:before { opacity:.85; }
.dash-sidebar .logout-btn:active { background: linear-gradient(120deg, rgba(239,68,68,0.5), rgba(239,68,68,0.18)); box-shadow:0 0 0 2px rgba(239,68,68,0.35); }
html:not(.dark) .dash-sidebar .logout-btn:hover { background: rgba(239,68,68,0.10); }
html:not(.dark) .dash-sidebar .logout-btn:active { background: linear-gradient(120deg, rgba(239,68,68,0.35), rgba(239,68,68,0.12)); }
.guild-switcher .collapse-toggle { height:42px; padding:0 .75rem; border-radius:12px; }
.dash-sidebar.mode-mini .guild-switcher .collapse-toggle { width:50px; height:50px; padding:0; display:flex; align-items:center; justify-content:center; }
.dash-sidebar.mode-mini .guild-switcher .collapse-toggle .chev { font-size:1rem; }
/* Mobile: hide collapse button and force full menu width */
@media (max-width: 900px){
  .dash-sidebar .collapse-toggle { display:none !important; }
  .dash-sidebar.mode-mini { width:100% !important; flex:0 0 100% !important; }
  .dash-sidebar.mode-mini .dash-menu-item .menu-label,
  .dash-sidebar.mode-mini .guild-switcher-btn .gw-meta,
  .dash-sidebar.mode-mini .logout-btn .menu-label { display:inline-flex !important; }
  .dash-sidebar.mode-mini .dash-menu-item { justify-content:flex-start; }
}

.overview-section .stat-cards { margin-top:.25rem; }
.commands-section .card { max-width:640px; }

/* Auto responses header stability */
.auto-head { display:flex; flex-wrap:nowrap; gap:.75rem; align-items:center; width:100%; }
.auto-head .section-title { margin-bottom:0; flex:0 0 auto; }
.auto-head .auto-head-search { flex:1 1 auto; min-width:240px; }
.auto-head .auto-head-actions { display:flex; gap:.5rem; flex:0 0 auto; }

/* DataTable theme enhancements */
.table-dt { --dt-border: rgba(255,255,255,0.08); --dt-head-bg: linear-gradient(90deg,rgba(255,255,255,0.08),rgba(255,255,255,0.02)); --dt-row-alt: rgba(255,255,255,0.025); }
.table-dt thead th { background: linear-gradient(90deg,rgba(31,37,55,0.9),rgba(34,41,62,0.85)); position:sticky; top:0; z-index:4; font-weight:600; padding:.6rem .75rem; border-bottom:1px solid rgba(255,255,255,0.12) !important; color: #e9effa !important; border-right:1px solid rgba(255,255,255,0.1); letter-spacing:.6px; font-size:.63rem; text-transform:uppercase; }
.table-dt thead th:last-child { border-right:none; }
.table-dt thead th.sortable { cursor:pointer; user-select:none; transition: var(--transition); }
.table-dt thead th.sortable:hover { background: linear-gradient(90deg, rgba(255,255,255,0.14), rgba(255,255,255,0.04)); }
.table-dt thead th.sort-asc, .table-dt thead th.sort-desc { color:#fff; }
.table-dt thead th.sort-asc:after, .table-dt thead th.sort-desc:after { content:''; display:inline-block; margin-left:6px; border:5px solid transparent; transform:translateY(-1px); }
.table-dt thead th.sort-asc:after { border-bottom-color: var(--accent); }
.table-dt thead th.sort-desc:after { border-top-color: var(--accent); }
.table-dt thead th .sort-order { font-size:.55rem; margin-left:2px; color: var(--accent); font-weight:600; }
.table-dt tbody tr:nth-child(even) { background: var(--dt-row-alt); }
.table-dt tbody tr:hover { background: linear-gradient(90deg, rgba(255,255,255,0.10), rgba(255,255,255,0.04)) !important; }
.table-dt tbody td { padding:.5rem .65rem; border-top:1px solid var(--dt-border); font-size:.75rem; }
.table-dt tbody tr.row-selected { background: linear-gradient(90deg, rgba(99,102,241,0.25), rgba(99,102,241,0.15)); }
.table-dt tbody tr.row-selected:hover { background: linear-gradient(90deg, rgba(99,102,241,0.35), rgba(99,102,241,0.22)); }
.dt-toolbar { display:flex; flex-wrap:wrap; gap:.75rem; align-items:center; margin-bottom:.75rem; }
.dt-status { font-size:.65rem; letter-spacing:.5px; text-transform:uppercase; opacity:.75; }
.dt-compact .table-dt tbody td { padding:.4rem .55rem; }
/* Scroll container adjustments */
/* Ensure scroll both directions (X & Y) within constrained container */
.table-modern-shell { overflow:auto; }
/* Mobile stacked table pattern */
@media (max-width: 720px){
  .table-mobile-stack table.table-modern { min-width:600px; }
  .table-mobile-stack table.table-modern thead { display:none; }
  .table-mobile-stack table.table-modern tbody tr { display:grid; grid-template-columns: 1fr 1fr; padding:.55rem .65rem; border:1px solid rgba(255,255,255,0.12); margin-bottom:.65rem; border-radius:10px; background:rgba(255,255,255,0.05); }
  .table-mobile-stack table.table-modern tbody tr.selected { box-shadow:0 0 0 2px var(--accent) inset; }
  .table-mobile-stack table.table-modern tbody tr td { display:flex; align-items:flex-start; gap:.4rem; padding:.35rem .4rem !important; font-size:.75rem; border:none; background:none !important; }
  .table-mobile-stack table.table-modern tbody tr td:first-child { width:auto; }
  .table-mobile-stack table.table-modern tbody tr td:before { content: attr(data-label); font-weight:600; font-size:.6rem; letter-spacing:.5px; text-transform:uppercase; color: var(--text-muted); flex:0 0 70px; }
  .table-mobile-stack table.table-modern tbody tr td[data-label='Actions'] { justify-content:flex-start; }
  .table-mobile-stack .bulk-bar { position:sticky; top:0; z-index:10; }
}

/* Mobile card alternative (when JS chooses card mode) */
@media (max-width: 720px){
  .autos-section-wrapper { position:relative; }
  .auto-cards-list { display:flex; flex-direction:column; gap:.75rem; }
  .auto-card { padding:.75rem .8rem .85rem; border:1px solid rgba(255,255,255,0.12); border-radius:14px; background:linear-gradient(145deg, rgba(255,255,255,0.07), rgba(255,255,255,0.03)); position:relative; backdrop-filter: blur(8px) saturate(140%); }
  .auto-card.sel { box-shadow:0 0 0 2px var(--accent),0 0 0 6px rgba(99,102,241,0.35); border-color: var(--accent); }
  .auto-card.disabled { opacity:.6; }
  .auto-card.match { background:linear-gradient(145deg, rgba(16,185,129,0.25), rgba(16,185,129,0.08)); }
  .auto-card-row { display:flex; align-items:center; gap:.6rem; }
  .auto-card-row.top { margin-bottom:.4rem; }
  .auto-card-row.pattern { font-size:.7rem; letter-spacing:.3px; margin-bottom:.35rem; flex-wrap:wrap; }
  .auto-card-row.pattern .pattern-text { background: rgba(0,0,0,0.4); padding:.2rem .45rem; border-radius:6px; font-size:.68rem; color:#bcd3ff; }
  .auto-card-row.pattern .flags-badge { background: rgba(255,255,255,0.08); border:1px solid rgba(255,255,255,0.15); padding:.15rem .45rem; border-radius:6px; font-size:.55rem; letter-spacing:.5px; text-transform:uppercase; }
  .auto-card-row.replies { font-size:.65rem; color: var(--text-soft); margin-bottom:.5rem; }
  .auto-card-row.replies .replies-preview { line-height:1.05rem; }
  .auto-card-row.actions { gap:.5rem; }
  .auto-key-btn { background:none; border:none; color:#fff; font-weight:600; font-size:.85rem; letter-spacing:.3px; padding:0; cursor:pointer; text-align:left; }
  .auto-key-btn:hover { text-decoration:underline; }
  .bulk-bar-mobile-sticky { position:sticky; top:0; z-index:50; }
}
.dataTables_wrapper .dataTables_scroll { border:1px solid rgba(255,255,255,0.08); border-radius: var(--radius-sm); }
.dataTables_wrapper .dataTables_scrollHead { box-shadow: 0 2px 0 rgba(255,255,255,0.06); }
.dataTables_wrapper .dataTables_scrollBody { scrollbar-color: rgba(255,255,255,0.25) transparent; }
.dataTables_wrapper .dataTables_scrollBody::-webkit-scrollbar { height:10px; }
.dataTables_wrapper .dataTables_scrollBody::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.22); }
/* Highlight for DataTables selected rows */
.table-dt tbody tr.selected { background: linear-gradient(90deg, rgba(99,102,241,0.30), rgba(99,102,241,0.18)) !important; }
.table-dt tbody tr.selected:hover { background: linear-gradient(90deg, rgba(99,102,241,0.38), rgba(99,102,241,0.24)) !important; }
/* Ensure select-checkbox pseudo element visible */
table.dataTable td.select-checkbox:before, table.dataTable td.select-checkbox:after { border-color: var(--accent) !important; }

/* Bulk bar page size select theming */
.bulk-bar .form-select.form-select-sm {
  background: rgba(255,255,255,0.08) !important;
  border:1px solid rgba(255,255,255,0.22) !important;
  color: var(--text-base) !important;
  padding:.25rem .6rem .25rem .5rem;
  font-size:.65rem;
  letter-spacing:.5px;
  height: calc(1.55rem + 2px);
}
.bulk-bar .form-select.form-select-sm:focus { box-shadow: 0 0 0 2px rgba(99,102,241,0.45) !important; }
.bulk-bar .form-select.form-select-sm option { background:#1c2233; color: var(--text-base); }
/* Generic select contrast (page size & any DataTables length control) */
select.form-select, .dataTables_wrapper .dataTables_length select.form-select {
  background: linear-gradient(135deg, rgba(255,255,255,0.10), rgba(255,255,255,0.04)) !important;
  color: var(--text-base) !important;
  border:1px solid rgba(255,255,255,0.25) !important;
}
select.form-select:focus, .dataTables_wrapper .dataTables_length select.form-select:focus {
  box-shadow:0 0 0 2px rgba(99,102,241,0.5) !important;
}
select.form-select option, .dataTables_wrapper .dataTables_length select.form-select option { background:#1c2233; color: var(--text-base); }
/* Page size selector themed */
.dt-toolbar .form-select.form-select-sm { 
  background: rgba(255,255,255,0.08) !important;
  border:1px solid rgba(255,255,255,0.22) !important;
  color: var(--text-base) !important;
  padding:.25rem .6rem .25rem .5rem;
  font-size:.65rem;
  letter-spacing:.5px;
  height: calc(1.55rem + 2px);
}
.dt-toolbar .form-select.form-select-sm:focus { box-shadow: 0 0 0 2px rgba(99,102,241,0.45) !important; }
.dt-toolbar .form-select.form-select-sm option { background: #1c2233; color: var(--text-base); }

/* Guild selection modern grid */
.guild-select-wrapper { position: relative; }
.guild-search { max-width: 220px; }
.guild-grid { display:grid; gap:1rem; grid-template-columns: repeat(auto-fill,minmax(180px,1fr)); }
.guild-card { position:relative; background: rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.12); border-radius: var(--radius-sm); padding:.85rem .75rem .75rem; text-align:left; display:flex; gap:.65rem; align-items:center; cursor:pointer; transition: var(--transition); color: var(--text-base); overflow:hidden; }
.guild-card:before { content:""; position:absolute; inset:0; background: radial-gradient(circle at 120% -10%, rgba(99,102,241,0.35), transparent 70%); opacity:0; transition: var(--transition); }
.guild-card:hover { border-color: rgba(255,255,255,0.28); background: rgba(255,255,255,0.08); }
.guild-card:hover:before { opacity:.8; }
.guild-card.active { border-color: var(--accent); box-shadow: var(--accent-glow); }
.guild-card.active:before { opacity:1; }
.guild-icon-wrap { width:46px; height:46px; flex:0 0 46px; border-radius: 12px; background: rgba(0,0,0,0.25); display:flex; align-items:center; justify-content:center; overflow:hidden; position:relative; }
.guild-icon-wrap img { width:100%; height:100%; object-fit:cover; display:block; }
.guild-icon-fallback { font-size:.9rem; font-weight:600; letter-spacing:.5px; }
.guild-meta { flex:1 1 auto; min-width:0; display:flex; flex-direction:column; gap:.25rem; }
.guild-name { font-size:.85rem; font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.guild-tags { display:flex; gap:.35rem; flex-wrap:wrap; }
.badge-perm { background: rgba(16,185,129,0.15); color: var(--success); border:1px solid rgba(16,185,129,0.4); font-size:.55rem; padding:.2rem .45rem; border-radius: 999px; letter-spacing:.5px; text-transform:uppercase; font-weight:600; }
.checkmark { position:absolute; top:6px; right:8px; font-size:.9rem; color: var(--success); font-weight:700; text-shadow:0 0 6px rgba(16,185,129,0.6); }
@media (max-width: 600px){ .guild-grid { grid-template-columns: repeat(auto-fill,minmax(150px,1fr)); } .guild-search { max-width:100%; } }

/* Login modern layout */
.login-viewport { min-height: 100vh; display:flex; align-items:center; justify-content:center; padding:3.5rem 1rem 2rem; position:relative; overflow:hidden; }
body.login-mode { height:100vh; overflow:hidden; }
.login-center { width:100%; max-width:520px; }
.login-card { position:relative; overflow:hidden; border-radius: var(--radius); }
.login-card:before { content:""; position:absolute; inset:0; background: radial-gradient(circle at 80% -10%, rgba(99,102,241,0.4), transparent 70%); opacity:.6; pointer-events:none; }
.login-card-inner { padding:2.1rem 2.15rem 2.4rem; position:relative; }
.login-hero { display:flex; gap:1rem; align-items:center; }
.logo-orb { width:64px; height:64px; border-radius:22px; background:linear-gradient(145deg,var(--accent) 0%, #8184ff 45%, #6366f1 100%); display:flex; align-items:center; justify-content:center; font-weight:700; font-size:1.25rem; letter-spacing:.5px; color:#fff; box-shadow:0 4px 18px -4px rgba(99,102,241,0.55),0 0 0 2px rgba(255,255,255,0.12); }
.logo-orb .logo-img { width:100%; height:100%; object-fit:cover; border-radius:22px; display:block; }
.logo-orb .logo-img + .orb-text { display:none; }
.login-title { font-size:1.55rem; font-weight:600; letter-spacing:.5px; }
.login-subtitle { font-size:.8rem; letter-spacing:.5px; color:var(--text-muted); font-weight:500; }
.btn-discord-cta { --grad: linear-gradient(90deg,var(--accent),#8d90ff); background: var(--grad); border:none; color:#fff !important; font-weight:600; letter-spacing:.3px; box-shadow: var(--accent-glow); padding:.85rem 1.25rem; border-radius: calc(var(--radius-sm) + 2px); position:relative; overflow:hidden; }
.btn-discord-cta .ico { font-size:.95rem; margin-right:.4rem; opacity:.85; }
.btn-discord-cta:before { content:""; position:absolute; inset:0; background: linear-gradient(120deg, rgba(255,255,255,0.18), transparent 65%); mix-blend-mode:overlay; opacity:.55; transition:var(--transition); }
.btn-discord-cta:hover:before { opacity:.85; }
.login-footer { text-align:center; opacity:.75; }
.auth-processing { min-height:160px; }

/* Dashboard footer */
.app-footer { position:fixed; bottom:0; left:0; width:100%; margin-top:0; padding:.85rem 1rem .95rem; text-align:center; font-size:.7rem; letter-spacing:.5px; color:var(--text-muted); background: var(--glass-bg); backdrop-filter: blur(14px) saturate(160%); -webkit-backdrop-filter: blur(14px) saturate(160%); border-top:1px solid var(--glass-border); z-index:1500; }
.app-footer .footer-inner { opacity:.85; }
body.has-fixed-footer { padding-bottom:70px; }
html:not(.dark) .app-footer { background: rgba(255,255,255,0.85); border-top:1px solid rgba(0,0,0,0.08); }
.fade-in-soft { animation: fadeInSoft .8s ease; }
@keyframes fadeInSoft { from { opacity:0; transform: translateY(4px);} to { opacity:1; transform: translateY(0);} }

/* High contrast override for table headers (pure React table) */
.table-modern thead th {
  color: black !important; /* brighter for stronger contrast */
  /* text-shadow: 0 0 2px rgba(0,0,0,0.4); */
  font-weight: 600;
}
